\section{Discussion}
global state, for reading only?
whats the relationship between the data types?
how much padding of the thing?

Main focus on overall data structure, and predict how it should be flattened in array langauge

Structure of functions and their relations

Whats done, whats left to be done

How to map from pointer-based to array-based representation

show interesting examples, highlight the idea, show snippet

show problem of inplace update in report
  errors etc

less is more

write meaningful clear examples that illustrate techniques, dont exhaustively go though everything

teach lessons with report

structure of data

make illustration

useful information, which functions are called multiple times, which can be inlined

calltree, starting with canopy_exchange

overall call structure, overall data structure




Many while loops are valid redomaps, but those are very complicated to write, and to translate from while loops.

Eg. a while loop over all Individuals in a Vegetation, the Individuals are modified, but several scalars are also accumulated. It can easily be rendered as a map, producing one extra array for each accumulator, which can then be summed afterwards. Preserving the modifications to each Indiviudal is not  possible if they are also put through the reduction, and fiddling with tuples and curry gets complicated. e.g the fpar function in canexch.fut.
